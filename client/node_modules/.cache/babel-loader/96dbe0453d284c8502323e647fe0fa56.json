{"ast":null,"code":"import { authLogin, authLogout } from \"./actions\";\nimport { fetch } from \"../../utils\";\n\nconst login = params => dispatch => {\n  return fetch(`/airlock/csrf-cookie`, \"GET\").then(() => {\n    fetch(`/api/login/steam/callback${params}`, \"GET\").then(user => {\n      console.log(user);\n      dispatch(authLogin(user));\n    }).catch(error => {\n      logout();\n    });\n  }).catch(err => console.log(err));\n};\n\nconst logout = () => dispatch => {\n  return fetch(`/api/logout`, \"POST\").then(() => {\n    dispatch(authLogout());\n  }).catch(err => console.log(err));\n};\n\nconst me = () => dispatch => {\n  return fetch(\"/api/user\", \"GET\").then(response => {\n    console.log(response);\n    dispatch(authLogin(response));\n    return response;\n  }).catch(error => {// logout()\n  });\n};\n\nexport { login, logout, me };","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/store/ducks/auth/operations.js"],"names":["authLogin","authLogout","fetch","login","params","dispatch","then","user","console","log","catch","error","logout","err","me","response"],"mappings":"AAAA,SAAQA,SAAR,EAAmBC,UAAnB,QAAoC,WAApC;AACA,SAAQC,KAAR,QAAoB,aAApB;;AAEA,MAAMC,KAAK,GAAIC,MAAD,IAAaC,QAAD,IAAc;AACpC,SAAOH,KAAK,CAAE,sBAAF,EAAyB,KAAzB,CAAL,CACFI,IADE,CACG,MAAM;AACRJ,IAAAA,KAAK,CAAE,4BAA2BE,MAAO,EAApC,EAAuC,KAAvC,CAAL,CACKE,IADL,CACWC,IAAD,IAAU;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAF,MAAAA,QAAQ,CAACL,SAAS,CAACO,IAAD,CAAV,CAAR;AACH,KAJL,EAKKG,KALL,CAKYC,KAAD,IAAW;AACdC,MAAAA,MAAM;AACT,KAPL;AAQH,GAVE,EAWFF,KAXE,CAWIG,GAAG,IAAIL,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAXX,CAAP;AAYH,CAbD;;AAeA,MAAMD,MAAM,GAAG,MAAMP,QAAQ,IAAI;AAC7B,SAAOH,KAAK,CAAE,aAAF,EAAgB,MAAhB,CAAL,CACFI,IADE,CACG,MAAM;AACRD,IAAAA,QAAQ,CAACJ,UAAU,EAAX,CAAR;AACH,GAHE,EAIFS,KAJE,CAIIG,GAAG,IAAIL,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAJX,CAAP;AAKH,CAND;;AAQA,MAAMC,EAAE,GAAG,MAAMT,QAAQ,IAAI;AACzB,SAAOH,KAAK,CAAC,WAAD,EAAc,KAAd,CAAL,CACFI,IADE,CACIS,QAAD,IAAc;AAChBP,IAAAA,OAAO,CAACC,GAAR,CAAYM,QAAZ;AACAV,IAAAA,QAAQ,CAACL,SAAS,CAACe,QAAD,CAAV,CAAR;AACA,WAAOA,QAAP;AACH,GALE,EAMFL,KANE,CAMKC,KAAD,IAAW,CACd;AACH,GARE,CAAP;AASH,CAVD;;AAaA,SACIR,KADJ,EACWS,MADX,EACmBE,EADnB","sourcesContent":["import {authLogin, authLogout} from \"./actions\";\r\nimport {fetch} from \"../../utils\";\r\n\r\nconst login = (params) => (dispatch) => {\r\n    return fetch(`/airlock/csrf-cookie`, \"GET\")\r\n        .then(() => {\r\n            fetch(`/api/login/steam/callback${params}`, \"GET\")\r\n                .then((user) => {\r\n                    console.log(user)\r\n                    dispatch(authLogin(user))\r\n                })\r\n                .catch((error) => {\r\n                    logout()\r\n                });\r\n        })\r\n        .catch(err => console.log(err));\r\n}\r\n\r\nconst logout = () => dispatch => {\r\n    return fetch(`/api/logout`, \"POST\")\r\n        .then(() => {\r\n            dispatch(authLogout())\r\n        })\r\n        .catch(err => console.log(err));\r\n}\r\n\r\nconst me = () => dispatch => {\r\n    return fetch(\"/api/user\", \"GET\")\r\n        .then((response) => {\r\n            console.log(response)\r\n            dispatch(authLogin(response))\r\n            return response\r\n        })\r\n        .catch((error) => {\r\n            // logout()\r\n        });\r\n}\r\n\r\n\r\nexport {\r\n    login, logout, me\r\n}"]},"metadata":{},"sourceType":"module"}