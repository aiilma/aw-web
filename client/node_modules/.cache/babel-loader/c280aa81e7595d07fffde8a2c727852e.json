{"ast":null,"code":"import { authLogin, authLogout, authLoginCompleted, authLogoutCompleted, authLoginFailed, authLogoutFailed } from \"./actions\";\nimport { fetch } from \"../../utils\";\n\nconst login = params => dispatch => {\n  dispatch(authLogin());\n  return fetch(`/airlock/csrf-cookie`, \"GET\").then(() => {\n    fetch(`/api/login/steam/callback${params}`, \"GET\").then(user => {\n      dispatch(authLoginCompleted(user));\n    }).catch(error => {\n      console.log('errka');\n      logout();\n    });\n  }).catch(err => {\n    console.error(err);\n    dispatch(authLoginFailed());\n  });\n};\n\nconst logout = () => dispatch => {\n  dispatch(authLogout());\n  return fetch(`/api/logout`, \"POST\").then(res => {\n    dispatch(authLogoutCompleted());\n  }).catch(err => {\n    console.error(err);\n    dispatch(authLogoutFailed());\n  });\n};\n\nconst me = () => dispatch => {\n  dispatch(authLogin());\n  return fetch(`/api/user`, \"GET\").then(response => {\n    dispatch(authLoginCompleted(response));\n    return response;\n  }).catch(error => {\n    logout();\n  });\n};\n\nexport { login, logout, me };","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/store/ducks/auth/operations.js"],"names":["authLogin","authLogout","authLoginCompleted","authLogoutCompleted","authLoginFailed","authLogoutFailed","fetch","login","params","dispatch","then","user","catch","error","console","log","logout","err","res","me","response"],"mappings":"AAAA,SACIA,SADJ,EAEIC,UAFJ,EAGIC,kBAHJ,EAIIC,mBAJJ,EAKIC,eALJ,EAMIC,gBANJ,QAOO,WAPP;AAQA,SAAQC,KAAR,QAAoB,aAApB;;AAEA,MAAMC,KAAK,GAAIC,MAAD,IAAaC,QAAD,IAAc;AACpCA,EAAAA,QAAQ,CAACT,SAAS,EAAV,CAAR;AACA,SAAOM,KAAK,CAAE,sBAAF,EAAyB,KAAzB,CAAL,CACFI,IADE,CACG,MAAM;AACRJ,IAAAA,KAAK,CAAE,4BAA2BE,MAAO,EAApC,EAAuC,KAAvC,CAAL,CACKE,IADL,CACWC,IAAD,IAAU;AACZF,MAAAA,QAAQ,CAACP,kBAAkB,CAACS,IAAD,CAAnB,CAAR;AACH,KAHL,EAIKC,KAJL,CAIYC,KAAD,IAAW;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAC,MAAAA,MAAM;AACT,KAPL;AAQH,GAVE,EAWFJ,KAXE,CAWIK,GAAG,IAAI;AACVH,IAAAA,OAAO,CAACD,KAAR,CAAcI,GAAd;AACAR,IAAAA,QAAQ,CAACL,eAAe,EAAhB,CAAR;AACH,GAdE,CAAP;AAeH,CAjBD;;AAmBA,MAAMY,MAAM,GAAG,MAAMP,QAAQ,IAAI;AAC7BA,EAAAA,QAAQ,CAACR,UAAU,EAAX,CAAR;AACA,SAAOK,KAAK,CAAE,aAAF,EAAgB,MAAhB,CAAL,CACFI,IADE,CACIQ,GAAD,IAAS;AACXT,IAAAA,QAAQ,CAACN,mBAAmB,EAApB,CAAR;AACH,GAHE,EAIFS,KAJE,CAIIK,GAAG,IAAI;AACVH,IAAAA,OAAO,CAACD,KAAR,CAAcI,GAAd;AACAR,IAAAA,QAAQ,CAACJ,gBAAgB,EAAjB,CAAR;AACH,GAPE,CAAP;AAQH,CAVD;;AAYA,MAAMc,EAAE,GAAG,MAAMV,QAAQ,IAAI;AACzBA,EAAAA,QAAQ,CAACT,SAAS,EAAV,CAAR;AACA,SAAOM,KAAK,CAAE,WAAF,EAAc,KAAd,CAAL,CACFI,IADE,CACIU,QAAD,IAAc;AAChBX,IAAAA,QAAQ,CAACP,kBAAkB,CAACkB,QAAD,CAAnB,CAAR;AACA,WAAOA,QAAP;AACH,GAJE,EAKFR,KALE,CAKKC,KAAD,IAAW;AACdG,IAAAA,MAAM;AACT,GAPE,CAAP;AAQH,CAVD;;AAaA,SACIT,KADJ,EACWS,MADX,EACmBG,EADnB","sourcesContent":["import {\r\n    authLogin,\r\n    authLogout,\r\n    authLoginCompleted,\r\n    authLogoutCompleted,\r\n    authLoginFailed,\r\n    authLogoutFailed\r\n} from \"./actions\";\r\nimport {fetch} from \"../../utils\";\r\n\r\nconst login = (params) => (dispatch) => {\r\n    dispatch(authLogin())\r\n    return fetch(`/airlock/csrf-cookie`, \"GET\")\r\n        .then(() => {\r\n            fetch(`/api/login/steam/callback${params}`, \"GET\")\r\n                .then((user) => {\r\n                    dispatch(authLoginCompleted(user))\r\n                })\r\n                .catch((error) => {\r\n                    console.log('errka')\r\n                    logout()\r\n                });\r\n        })\r\n        .catch(err => {\r\n            console.error(err)\r\n            dispatch(authLoginFailed())\r\n        });\r\n}\r\n\r\nconst logout = () => dispatch => {\r\n    dispatch(authLogout())\r\n    return fetch(`/api/logout`, \"POST\")\r\n        .then((res) => {\r\n            dispatch(authLogoutCompleted())\r\n        })\r\n        .catch(err => {\r\n            console.error(err)\r\n            dispatch(authLogoutFailed())\r\n        });\r\n}\r\n\r\nconst me = () => dispatch => {\r\n    dispatch(authLogin())\r\n    return fetch(`/api/user`, \"GET\")\r\n        .then((response) => {\r\n            dispatch(authLoginCompleted(response))\r\n            return response\r\n        })\r\n        .catch((error) => {\r\n            logout()\r\n        });\r\n}\r\n\r\n\r\nexport {\r\n    login, logout, me\r\n}"]},"metadata":{},"sourceType":"module"}