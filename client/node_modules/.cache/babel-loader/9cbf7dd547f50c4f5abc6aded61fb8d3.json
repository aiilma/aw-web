{"ast":null,"code":"import _objectWithoutProperties from \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\src\\\\views\\\\layout\\\\header\\\\LoginButton.js\";\nimport React from 'react';\nimport { connect } from \"react-redux\";\nimport Button from \"@material-ui/core/Button\";\nimport { login } from \"../../../store/ducks/auth/operations\";\n\nfunction LoginButton(_ref) {\n  let login = _ref.login,\n      props = _objectWithoutProperties(_ref, [\"login\"]);\n\n  function handler(event) {\n    if (event.origin === process.env.REACT_APP_API_URL) {\n      login(event.data.data).catch(({\n        error,\n        statusCode\n      }) => {\n        const responseError = {\n          isError: true,\n          code: statusCode,\n          text: error\n        };\n        console.log(responseError);\n      });\n      window.removeEventListener(\"message\", handler);\n    }\n  }\n\n  const onHandleLogin = () => {\n    const popupWindow = window.open(process.env.REACT_APP_API_URL + '/api/auth/steam/handle', '_target', 'width=800, height=600');\n    if (window.focus) popupWindow.focus(); // subscribe event\n\n    window.addEventListener(\"message\", handler, false);\n  };\n\n  return React.createElement(Button, {\n    onClick: () => onHandleLogin(),\n    color: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\");\n}\n\nexport default connect(null, {\n  login\n})(LoginButton);","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/views/layout/header/LoginButton.js"],"names":["React","connect","Button","login","LoginButton","props","handler","event","origin","process","env","REACT_APP_API_URL","data","catch","error","statusCode","responseError","isError","code","text","console","log","window","removeEventListener","onHandleLogin","popupWindow","open","focus","addEventListener"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAAQC,KAAR,QAAoB,sCAApB;;AAGA,SAASC,WAAT,OAAwC;AAAA,MAAlBD,KAAkB,QAAlBA,KAAkB;AAAA,MAARE,KAAQ;;AACpC,WAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACpB,QAAIA,KAAK,CAACC,MAAN,KAAiBC,OAAO,CAACC,GAAR,CAAYC,iBAAjC,EAAoD;AAChDR,MAAAA,KAAK,CAACI,KAAK,CAACK,IAAN,CAAWA,IAAZ,CAAL,CACKC,KADL,CACW,CAAC;AAACC,QAAAA,KAAD;AAAQC,QAAAA;AAAR,OAAD,KAAyB;AAC5B,cAAMC,aAAa,GAAG;AAClBC,UAAAA,OAAO,EAAE,IADS;AAElBC,UAAAA,IAAI,EAAEH,UAFY;AAGlBI,UAAAA,IAAI,EAAEL;AAHY,SAAtB;AAKAM,QAAAA,OAAO,CAACC,GAAR,CAAYL,aAAZ;AACH,OARL;AASAM,MAAAA,MAAM,CAACC,mBAAP,CAA2B,SAA3B,EAAsCjB,OAAtC;AACH;AACJ;;AAED,QAAMkB,aAAa,GAAG,MAAM;AACxB,UAAMC,WAAW,GAAGH,MAAM,CAACI,IAAP,CAAYjB,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgC,wBAA5C,EAAsE,SAAtE,EAAiF,uBAAjF,CAApB;AACA,QAAIW,MAAM,CAACK,KAAX,EAAkBF,WAAW,CAACE,KAAZ,GAFM,CAGxB;;AACAL,IAAAA,MAAM,CAACM,gBAAP,CAAwB,SAAxB,EAAmCtB,OAAnC,EAA4C,KAA5C;AACH,GALD;;AAOA,SACI,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE,MAAMkB,aAAa,EAApC;AAAwC,IAAA,KAAK,EAAC,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADJ;AAGH;;AAGD,eAAevB,OAAO,CAAC,IAAD,EAAO;AAACE,EAAAA;AAAD,CAAP,CAAP,CAAuBC,WAAvB,CAAf","sourcesContent":["import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {login} from \"../../../store/ducks/auth/operations\";\r\n\r\n\r\nfunction LoginButton({login, ...props}) {\r\n    function handler(event) {\r\n        if (event.origin === process.env.REACT_APP_API_URL) {\r\n            login(event.data.data)\r\n                .catch(({error, statusCode}) => {\r\n                    const responseError = {\r\n                        isError: true,\r\n                        code: statusCode,\r\n                        text: error\r\n                    };\r\n                    console.log(responseError)\r\n                })\r\n            window.removeEventListener(\"message\", handler)\r\n        }\r\n    }\r\n\r\n    const onHandleLogin = () => {\r\n        const popupWindow = window.open(process.env.REACT_APP_API_URL + '/api/auth/steam/handle', '_target', 'width=800, height=600');\r\n        if (window.focus) popupWindow.focus();\r\n        // subscribe event\r\n        window.addEventListener(\"message\", handler, false);\r\n    }\r\n\r\n    return (\r\n        <Button onClick={() => onHandleLogin()} color=\"inherit\">Войти</Button>\r\n    );\r\n}\r\n\r\n\r\nexport default connect(null, {login})(LoginButton)"]},"metadata":{},"sourceType":"module"}