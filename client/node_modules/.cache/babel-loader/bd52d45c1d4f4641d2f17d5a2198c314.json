{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\src\\\\components\\\\Compositions\\\\CompositionsContainer.js\";\nimport React, { Component } from 'react';\nimport Layout from \"../_layouts/default/Layout\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { withRouter } from \"react-router-dom\";\nimport CompositionList from \"./CompositionList\";\nimport Pager from \"./Pager\";\nimport { connect } from \"react-redux\";\n\nclass CompositionsContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handlePageClick = data => {\n      let selected = data.selected;\n      let offset = Math.ceil(selected * 4); // const page = this.props.match.params.page\n\n      this.setState({\n        offset: offset\n      }, () => {\n        this.loadCommentsFromServer();\n      });\n    };\n\n    this.state = {\n      limit: 2,\n      compositions: [],\n      pageCount: 0,\n      offset: 0\n    };\n  }\n\n  loadCommentsFromServer() {\n    setTimeout(() => {\n      const compositions = this.props.compositions;\n      this.setState({\n        compositions: compositions,\n        pageCount: Math.ceil(compositions.length / this.state.limit)\n      });\n    }, 0); // axios.get('/compositions', {\n    //     data: {\n    //         limit: 16,\n    //         offset: this.state.offset\n    //     },\n    // }).then(data => {\n    //     this.setState({\n    //         compositions: data.compositions,\n    //         pageCount: Math.ceil(this.state.compositions.length / this.state.limit),\n    //     });\n    // }).catch((error) => {\n    //     console.log(error);\n    // })\n  }\n\n  componentDidMount() {\n    // console.log(this.props)\n    // const page = this.props.match.params.page\n    this.loadCommentsFromServer();\n  }\n\n  render() {\n    return React.createElement(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h5\",\n      gutterBottom: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"\\u041B\\u0438\\u0441\\u0442\\u0438\\u043D\\u0433 \\u043A\\u043E\\u043C\\u043F\\u043E\\u0437\\u0438\\u0446\\u0438\\u0439\"), React.createElement(CompositionList, {\n      compositions: this.state.compositions,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(Pager, {\n      pageCount: this.state.pageCount,\n      onPageChange: this.handlePageClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = store => ({\n  compositions: store.compositionsPage.compositions\n});\n\nexport default connect(mapStateToProps)(withRouter(CompositionsContainer));","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/components/Compositions/CompositionsContainer.js"],"names":["React","Component","Layout","Typography","withRouter","CompositionList","Pager","connect","CompositionsContainer","constructor","props","handlePageClick","data","selected","offset","Math","ceil","setState","loadCommentsFromServer","state","limit","compositions","pageCount","setTimeout","length","componentDidMount","render","mapStateToProps","store","compositionsPage"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAAQC,OAAR,QAAsB,aAAtB;;AAEA,MAAMC,qBAAN,SAAoCP,SAApC,CAA8C;AAE1CQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAuCnBC,eAvCmB,GAuCDC,IAAI,IAAI;AACtB,UAAIC,QAAQ,GAAGD,IAAI,CAACC,QAApB;AACA,UAAIC,MAAM,GAAGC,IAAI,CAACC,IAAL,CAAUH,QAAQ,GAAG,CAArB,CAAb,CAFsB,CAGtB;;AAEA,WAAKI,QAAL,CAAc;AAACH,QAAAA,MAAM,EAAEA;AAAT,OAAd,EAAgC,MAAM;AAClC,aAAKI,sBAAL;AACH,OAFD;AAGH,KA/CkB;;AAEf,SAAKC,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAE,CADE;AAETC,MAAAA,YAAY,EAAE,EAFL;AAGTC,MAAAA,SAAS,EAAE,CAHF;AAITR,MAAAA,MAAM,EAAE;AAJC,KAAb;AAMH;;AAEDI,EAAAA,sBAAsB,GAAG;AACrBK,IAAAA,UAAU,CAAC,MAAM;AACb,YAAMF,YAAY,GAAG,KAAKX,KAAL,CAAWW,YAAhC;AACA,WAAKJ,QAAL,CAAc;AACVI,QAAAA,YAAY,EAAEA,YADJ;AAEVC,QAAAA,SAAS,EAAEP,IAAI,CAACC,IAAL,CAAUK,YAAY,CAACG,MAAb,GAAsB,KAAKL,KAAL,CAAWC,KAA3C;AAFD,OAAd;AAIH,KANS,EAMP,CANO,CAAV,CADqB,CAQrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;;AAEDK,EAAAA,iBAAiB,GAAG;AAChB;AACA;AACA,SAAKP,sBAAL;AACH;;AAYDQ,EAAAA,MAAM,GAAG;AACL,WACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,UAAD;AAAY,MAAA,OAAO,EAAC,IAApB;AAAyB,MAAA,YAAY,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iHADJ,EAEI,oBAAC,eAAD;AAAiB,MAAA,YAAY,EAAE,KAAKP,KAAL,CAAWE,YAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAE,KAAKF,KAAL,CAAWG,SAA7B;AAAwC,MAAA,YAAY,EAAE,KAAKX,eAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,CADJ;AAOH;;AA3DyC;;AA8D9C,MAAMgB,eAAe,GAAIC,KAAD,KAAY;AAChCP,EAAAA,YAAY,EAAEO,KAAK,CAACC,gBAAN,CAAuBR;AADL,CAAZ,CAAxB;;AAIA,eAAed,OAAO,CAACoB,eAAD,CAAP,CAAyBvB,UAAU,CAACI,qBAAD,CAAnC,CAAf","sourcesContent":["import React, {Component} from 'react'\r\nimport Layout from \"../_layouts/default/Layout\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport CompositionList from \"./CompositionList\";\r\nimport Pager from \"./Pager\";\r\nimport {connect} from \"react-redux\";\r\n\r\nclass CompositionsContainer extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            limit: 2,\r\n            compositions: [],\r\n            pageCount: 0,\r\n            offset: 0,\r\n        }\r\n    }\r\n\r\n    loadCommentsFromServer() {\r\n        setTimeout(() => {\r\n            const compositions = this.props.compositions\r\n            this.setState({\r\n                compositions: compositions,\r\n                pageCount: Math.ceil(compositions.length / this.state.limit),\r\n            });\r\n        }, 0)\r\n        // axios.get('/compositions', {\r\n        //     data: {\r\n        //         limit: 16,\r\n        //         offset: this.state.offset\r\n        //     },\r\n        // }).then(data => {\r\n        //     this.setState({\r\n        //         compositions: data.compositions,\r\n        //         pageCount: Math.ceil(this.state.compositions.length / this.state.limit),\r\n        //     });\r\n        // }).catch((error) => {\r\n        //     console.log(error);\r\n        // })\r\n    }\r\n\r\n    componentDidMount() {\r\n        // console.log(this.props)\r\n        // const page = this.props.match.params.page\r\n        this.loadCommentsFromServer();\r\n    }\r\n\r\n    handlePageClick = data => {\r\n        let selected = data.selected;\r\n        let offset = Math.ceil(selected * 4);\r\n        // const page = this.props.match.params.page\r\n\r\n        this.setState({offset: offset}, () => {\r\n            this.loadCommentsFromServer();\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Layout>\r\n                <Typography variant=\"h5\" gutterBottom>Листинг композиций</Typography>\r\n                <CompositionList compositions={this.state.compositions}/>\r\n                <Pager pageCount={this.state.pageCount} onPageChange={this.handlePageClick}/>\r\n            </Layout>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (store) => ({\r\n    compositions: store.compositionsPage.compositions\r\n})\r\n\r\nexport default connect(mapStateToProps)(withRouter(CompositionsContainer))"]},"metadata":{},"sourceType":"module"}