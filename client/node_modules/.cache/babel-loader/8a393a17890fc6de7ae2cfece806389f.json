{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\src\\\\views\\\\layout\\\\header\\\\LoginButton.js\";\nimport React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport Button from \"@material-ui/core/Button\";\nimport { login } from \"../../../store/utils/JWTAuth\";\n\nclass LoginButton extends React.Component {\n  onHandleLogin() {\n    const popupWindow = window.open(process.env.REACT_APP_API_URL + '/api/auth/steam/handle', '', 'width=800, height=600');\n    if (window.focus) popupWindow.focus();\n  }\n\n  componentDidMount() {\n    window.addEventListener('message', async event => {\n      if (event.origin !== process.env.REACT_APP_API_URL) return;\n      const res = event.data.response;\n      await login(res);\n      console.log(res); // if (res.success) {\n      //     this.props.login(res.data).then(flag => {\n      //         if (flag === true) {\n      //             localStorage.setItem('authToken', res.data.api_token);\n      //             this.props.history.push(\"/compositions\")\n      //         } // steam auth\n      //     })\n      // }\n    });\n  }\n\n  render() {\n    return React.createElement(Button, {\n      onClick: this.onHandleLogin,\n      color: \"inherit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\");\n  }\n\n}\n\nexport default withRouter(LoginButton);","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/views/layout/header/LoginButton.js"],"names":["React","withRouter","Button","login","LoginButton","Component","onHandleLogin","popupWindow","window","open","process","env","REACT_APP_API_URL","focus","componentDidMount","addEventListener","event","origin","res","data","response","console","log","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAAQC,KAAR,QAAoB,8BAApB;;AAGA,MAAMC,WAAN,SAA0BJ,KAAK,CAACK,SAAhC,CAA0C;AACtCC,EAAAA,aAAa,GAAG;AACZ,UAAMC,WAAW,GAAGC,MAAM,CAACC,IAAP,CAAYC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgC,wBAA5C,EAAsE,EAAtE,EAA0E,uBAA1E,CAApB;AACA,QAAIJ,MAAM,CAACK,KAAX,EACIN,WAAW,CAACM,KAAZ;AACP;;AAEDC,EAAAA,iBAAiB,GAAG;AAChBN,IAAAA,MAAM,CAACO,gBAAP,CAAwB,SAAxB,EAAmC,MAAMC,KAAN,IAAe;AAC9C,UAAIA,KAAK,CAACC,MAAN,KAAiBP,OAAO,CAACC,GAAR,CAAYC,iBAAjC,EAAoD;AADN,YAG7BM,GAH6B,GAGvBF,KAAK,CAACG,IAHiB,CAGvCC,QAHuC;AAK9C,YAAMjB,KAAK,CAACe,GAAD,CAAX;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ,EAN8C,CAO9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KAfD;AAgBH;;AAEDK,EAAAA,MAAM,GAAG;AACL,WACI,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKjB,aAAtB;AAAqC,MAAA,KAAK,EAAC,SAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADJ;AAGH;;AA9BqC;;AAiC1C,eAAeL,UAAU,CAACG,WAAD,CAAzB","sourcesContent":["import React from 'react';\r\n\r\nimport {withRouter} from \"react-router-dom\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {login} from \"../../../store/utils/JWTAuth\";\r\n\r\n\r\nclass LoginButton extends React.Component {\r\n    onHandleLogin() {\r\n        const popupWindow = window.open(process.env.REACT_APP_API_URL + '/api/auth/steam/handle', '', 'width=800, height=600');\r\n        if (window.focus)\r\n            popupWindow.focus()\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('message', async event => {\r\n            if (event.origin !== process.env.REACT_APP_API_URL) return;\r\n\r\n            const {response: res}= event.data;\r\n\r\n            await login(res)\r\n            console.log(res)\r\n            // if (res.success) {\r\n            //     this.props.login(res.data).then(flag => {\r\n            //         if (flag === true) {\r\n            //             localStorage.setItem('authToken', res.data.api_token);\r\n            //             this.props.history.push(\"/compositions\")\r\n            //         } // steam auth\r\n            //     })\r\n            // }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Button onClick={this.onHandleLogin} color=\"inherit\">Войти</Button>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(LoginButton)"]},"metadata":{},"sourceType":"module"}