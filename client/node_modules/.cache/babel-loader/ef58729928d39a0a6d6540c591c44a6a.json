{"ast":null,"code":"import _objectSpread from \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport { LOGIN, LOGOUT } from \"../actions/AuthActions\";\nimport RAvatar from \"../../assets/img/my_avatar.jpg\";\nconst user = {\n  user_id: null,\n  steamid: null,\n  nickname: null,\n  avatar: null,\n  balance: null,\n  group: null,\n  registered_at: null,\n  visited_at: null\n};\nconst initialState = {\n  isAuthenticated: false,\n  isAdmin: false,\n  user\n};\nexport function userReducer(state = initialState, action) {\n  switch (action.type) {\n    case LOGIN:\n      return _objectSpread({}, state, {\n        isAuthenticated: action.payload\n      });\n\n    case LOGOUT:\n      return _objectSpread({}, state, {\n        isAuthenticated: action.payload\n      });\n\n    default:\n      return state;\n  }\n}\n\nconst authLogin = (state, payload) => {\n  const jwtToken = payload.token;\n  const user = payload.user[0];\n\n  if (!!payload.user[0].admin) {\n    localStorage.setItem('is_admin', true);\n  } else {\n    localStorage.setItem('is_admin', false);\n  }\n\n  localStorage.setItem('jwt_token', jwtToken);\n  Http.defaults.headers.common['Authorization'] = `Bearer ${jwtToken}`;\n  state = Object.assign({}, state, {\n    isAuthenticated: true,\n    isAdmin: localStorage.getItem('is_admin') === 'true',\n    user\n  });\n  return state;\n};\n\nconst checkAuth = state => {\n  state = Object.assign({}, state, {\n    isAuthenticated: !!localStorage.getItem('jwt_token'),\n    isAdmin: localStorage.getItem('is_admin')\n  });\n\n  if (state.isAuthenticated) {\n    Http.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem('jwt_token')}`;\n  }\n\n  return state;\n};\n\nconst logout = state => {\n  localStorage.removeItem('jwt_token');\n  localStorage.setItem('is_admin', false);\n  state = Object.assign({}, state, {\n    isAuthenticated: false,\n    isAdmin: false,\n    user\n  });\n  return state;\n};","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/store/reducers/auth.js"],"names":["LOGIN","LOGOUT","RAvatar","user","user_id","steamid","nickname","avatar","balance","group","registered_at","visited_at","initialState","isAuthenticated","isAdmin","userReducer","state","action","type","payload","authLogin","jwtToken","token","admin","localStorage","setItem","Http","defaults","headers","common","Object","assign","getItem","checkAuth","logout","removeItem"],"mappings":"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","sourcesContent":["import {LOGIN, LOGOUT} from \"../actions/AuthActions\";\r\nimport RAvatar from \"../../assets/img/my_avatar.jpg\"\r\n\r\nconst user = {\r\n    user_id: null,\r\n    steamid: null,\r\n    nickname: null,\r\n    avatar: null,\r\n    balance: null,\r\n    group: null,\r\n    registered_at: null,\r\n    visited_at: null,\r\n};\r\n\r\nconst initialState = {\r\n    isAuthenticated : false,\r\n    isAdmin: false,\r\n    user\r\n};\r\n\r\nexport function userReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case LOGIN:\r\n            return {...state, isAuthenticated: action.payload}\r\n        case LOGOUT:\r\n            return {...state, isAuthenticated: action.payload}\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst authLogin = (state,payload) => {\r\n    const jwtToken = payload.token;\r\n    const user = payload.user[0];\r\n    if(!!payload.user[0].admin){\r\n        localStorage.setItem('is_admin',true);\r\n    } else {\r\n        localStorage.setItem('is_admin',false);\r\n    }\r\n    localStorage.setItem('jwt_token',jwtToken);\r\n    Http.defaults.headers.common['Authorization'] = `Bearer ${jwtToken}`;\r\n    state = Object.assign({}, state, {\r\n        isAuthenticated: true,\r\n        isAdmin: localStorage.getItem('is_admin') === 'true',\r\n        user\r\n    });\r\n    return state;\r\n\r\n};\r\n\r\nconst checkAuth = (state) =>{\r\n    state =Object.assign({},state,{\r\n        isAuthenticated : !!localStorage.getItem('jwt_token'),\r\n        isAdmin : localStorage.getItem('is_admin'),\r\n    });\r\n    if(state.isAuthenticated){\r\n        Http.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem('jwt_token')}`;\r\n    }\r\n    return state;\r\n};\r\n\r\nconst logout = (state) => {\r\n    localStorage.removeItem('jwt_token');\r\n    localStorage.setItem('is_admin',false);\r\n    state = Object.assign({},state,{\r\n        isAuthenticated: false,\r\n        isAdmin : false,\r\n        user\r\n    });\r\n    return state;\r\n};"]},"metadata":{},"sourceType":"module"}