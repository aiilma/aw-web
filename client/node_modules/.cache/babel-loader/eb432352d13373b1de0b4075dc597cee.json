{"ast":null,"code":"import _objectSpread from \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport { AxiosInstance as Http } from \"axios\";\nimport * as types from \"./types\";\nconst user = {\n  user_id: null,\n  steamid: null,\n  nickname: null,\n  avatar: null,\n  balance: null,\n  group: null,\n  registered_at: null,\n  visited_at: null\n};\nconst initialState = {\n  isAuthenticated: true,\n  user\n};\n\nfunction authReducer(state = initialState, {\n  type,\n  payload = null\n}) {\n  switch (type) {\n    case types.AUTH_LOGIN:\n      const jwtToken = payload.token;\n      const user = payload.user[0];\n      localStorage.setItem('jwt_token', jwtToken);\n      Http.defaults.headers.common['Authorization'] = `Bearer ${jwtToken}`;\n      return _objectSpread({}, state, {\n        isAuthenticated: true,\n        user\n      });\n\n    case types.AUTH_CHECK:\n      state = _objectSpread({}, state, {\n        isAuthenticated: !!localStorage.getItem('jwt_token')\n      });\n\n      if (state.isAuthenticated) {\n        Http.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem('jwt_token')}`;\n      }\n\n      return state;\n\n    case types.AUTH_LOGOUT:\n      localStorage.removeItem('jwt_token');\n      return _objectSpread({}, state, {\n        isAuthenticated: false,\n        user\n      });\n\n    default:\n      return state;\n  }\n}\n\n;\nexport default authReducer;","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/store/ducks/auth/reducers.js"],"names":["AxiosInstance","Http","types","user","user_id","steamid","nickname","avatar","balance","group","registered_at","visited_at","initialState","isAuthenticated","authReducer","state","type","payload","AUTH_LOGIN","jwtToken","token","localStorage","setItem","defaults","headers","common","AUTH_CHECK","getItem","AUTH_LOGOUT","removeItem"],"mappings":";AAAA,SAAQA,aAAa,IAAIC,IAAzB,QAAoC,OAApC;AACA,OAAO,KAAKC,KAAZ,MAAuB,SAAvB;AAEA,MAAMC,IAAI,GAAG;AACTC,EAAAA,OAAO,EAAE,IADA;AAETC,EAAAA,OAAO,EAAE,IAFA;AAGTC,EAAAA,QAAQ,EAAE,IAHD;AAITC,EAAAA,MAAM,EAAE,IAJC;AAKTC,EAAAA,OAAO,EAAE,IALA;AAMTC,EAAAA,KAAK,EAAE,IANE;AAOTC,EAAAA,aAAa,EAAE,IAPN;AAQTC,EAAAA,UAAU,EAAE;AARH,CAAb;AAWA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,eAAe,EAAE,IADA;AAEjBV,EAAAA;AAFiB,CAArB;;AAKA,SAASW,WAAT,CAAqBC,KAAK,GAAGH,YAA7B,EAA2C;AAACI,EAAAA,IAAD;AAAOC,EAAAA,OAAO,GAAG;AAAjB,CAA3C,EAAmE;AAC/D,UAAQD,IAAR;AACI,SAAKd,KAAK,CAACgB,UAAX;AACI,YAAMC,QAAQ,GAAGF,OAAO,CAACG,KAAzB;AACA,YAAMjB,IAAI,GAAGc,OAAO,CAACd,IAAR,CAAa,CAAb,CAAb;AACAkB,MAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCH,QAAlC;AACAlB,MAAAA,IAAI,CAACsB,QAAL,CAAcC,OAAd,CAAsBC,MAAtB,CAA6B,eAA7B,IAAiD,UAASN,QAAS,EAAnE;AAEA,+BACOJ,KADP;AAEIF,QAAAA,eAAe,EAAE,IAFrB;AAGIV,QAAAA;AAHJ;;AAKJ,SAAKD,KAAK,CAACwB,UAAX;AACIX,MAAAA,KAAK,qBACEA,KADF;AAEDF,QAAAA,eAAe,EAAE,CAAC,CAACQ,YAAY,CAACM,OAAb,CAAqB,WAArB;AAFlB,QAAL;;AAKA,UAAIZ,KAAK,CAACF,eAAV,EAA2B;AACvBZ,QAAAA,IAAI,CAACsB,QAAL,CAAcC,OAAd,CAAsBC,MAAtB,CAA6B,eAA7B,IAAiD,UAASJ,YAAY,CAACM,OAAb,CAAqB,WAArB,CAAkC,EAA5F;AACH;;AAED,aAAOZ,KAAP;;AACJ,SAAKb,KAAK,CAAC0B,WAAX;AACIP,MAAAA,YAAY,CAACQ,UAAb,CAAwB,WAAxB;AAEA,+BACOd,KADP;AAEIF,QAAAA,eAAe,EAAE,KAFrB;AAGIV,QAAAA;AAHJ;;AAKJ;AACI,aAAOY,KAAP;AAhCR;AAkCH;;AAAA;AAED,eAAeD,WAAf","sourcesContent":["import {AxiosInstance as Http} from \"axios\";\r\nimport * as types from \"./types\";\r\n\r\nconst user = {\r\n    user_id: null,\r\n    steamid: null,\r\n    nickname: null,\r\n    avatar: null,\r\n    balance: null,\r\n    group: null,\r\n    registered_at: null,\r\n    visited_at: null,\r\n};\r\n\r\nconst initialState = {\r\n    isAuthenticated: true,\r\n    user\r\n};\r\n\r\nfunction authReducer(state = initialState, {type, payload = null}) {\r\n    switch (type) {\r\n        case types.AUTH_LOGIN:\r\n            const jwtToken = payload.token;\r\n            const user = payload.user[0];\r\n            localStorage.setItem('jwt_token', jwtToken);\r\n            Http.defaults.headers.common['Authorization'] = `Bearer ${jwtToken}`;\r\n\r\n            return {\r\n                ...state,\r\n                isAuthenticated: true,\r\n                user\r\n            }\r\n        case types.AUTH_CHECK:\r\n            state = {\r\n                ...state,\r\n                isAuthenticated: !!localStorage.getItem('jwt_token'),\r\n            }\r\n\r\n            if (state.isAuthenticated) {\r\n                Http.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem('jwt_token')}`;\r\n            }\r\n\r\n            return state;\r\n        case types.AUTH_LOGOUT:\r\n            localStorage.removeItem('jwt_token');\r\n\r\n            return {\r\n                ...state,\r\n                isAuthenticated: false,\r\n                user\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authReducer"]},"metadata":{},"sourceType":"module"}