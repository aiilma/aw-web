{"ast":null,"code":"import _objectSpread from \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\src\\\\views\\\\pages\\\\CompOrderForm\\\\Container.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport SecondaryLayout from \"../../layout/SecondaryLayout\";\nimport { FormWrapper, InnerFormSpacer, Title } from \"../../common/form_components\";\nimport OrderFormInputs from \"./Inputs/Inputs\";\nimport OrderFormSummarize from \"./Summarize/Summarize\";\nimport OrderFormControls from \"./Controls/Controls\";\nimport { Spacer } from \"../../common/layout\";\n\nconst getDefaultState = composition => {\n  console.log(composition);\n  let typeVariant = {\n    long: {\n      value: composition.typeVariant === 1,\n      disabled: composition.typeVariant === 2\n    },\n    short: {\n      value: composition.typeVariant === 2,\n      disabled: composition.typeVariant === 1\n    }\n  };\n  let inputs = {};\n\n  if (Object.entries(composition.inputs).length > 0) {\n    inputs = _objectSpread({}, composition.inputs);\n    Object.keys(inputs).forEach(propName => {\n      inputs[propName] = _objectSpread({}, composition.inputs[propName], {\n        value: ''\n      });\n    });\n  }\n\n  return {\n    typeVariant,\n    inputs\n  };\n};\n\nclass OrderFormContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleTypeVariant = name => event => {\n      this.setState(_objectSpread({}, this.state, {\n        typeVariant: _objectSpread({}, this.state.typeVariant, {\n          [name]: _objectSpread({}, this.state.typeVariant[name], {\n            value: event.target.checked\n          })\n        })\n      }));\n    };\n\n    this.handleInputs = event => {\n      const inpName = event.target.id;\n      const inpValue = event.target.value;\n      this.setState(_objectSpread({}, this.state, {\n        inputs: _objectSpread({}, this.state.inputs, {\n          [inpName]: _objectSpread({}, this.state.inputs[inpName], {\n            value: inpValue\n          })\n        })\n      }));\n    };\n\n    this.onClear = () => {\n      this.setState(getDefaultState(this.props.compMeta)); // clear session / localStorage (action)\n    };\n\n    this.onBack = () => {\n      this.props.history.goBack();\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault(); // валидация данных в стейте, затем отправка на сервер\n\n      this.props.history.push(`${this.props.location.pathname}/success`);\n    };\n\n    this.state = getDefaultState(props.compMeta);\n  }\n\n  render() {\n    return React.createElement(SecondaryLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(Spacer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(FormWrapper, {\n      maxWidth: \"xl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(InnerFormSpacer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Title, {\n      text: \"\\u0424\\u043E\\u0440\\u043C\\u0430 \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      noValidate: true,\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(OrderFormInputs, {\n      inputs: this.state,\n      handlers: {\n        handleTypeVariant: this.props.compMeta.typeVariant === 0 ? this.handleTypeVariant : () => {},\n        handleInputs: this.handleInputs\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(OrderFormSummarize, {\n      price: this.props.compMeta.price,\n      title: this.props.compMeta.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(OrderFormControls, {\n      onClear: this.onClear,\n      onBack: this.onBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.auth,\n  compData: state.compOrderForm\n});\n\nexport default connect(mapStateToProps, {})(OrderFormContainer);","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/views/pages/CompOrderForm/Container.js"],"names":["React","Component","connect","SecondaryLayout","FormWrapper","InnerFormSpacer","Title","OrderFormInputs","OrderFormSummarize","OrderFormControls","Spacer","getDefaultState","composition","console","log","typeVariant","long","value","disabled","short","inputs","Object","entries","length","keys","forEach","propName","OrderFormContainer","constructor","props","handleTypeVariant","name","event","setState","state","target","checked","handleInputs","inpName","id","inpValue","onClear","compMeta","onBack","history","goBack","onSubmit","e","preventDefault","push","location","pathname","render","price","title","mapStateToProps","user","auth","compData","compOrderForm"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport SecondaryLayout from \"../../layout/SecondaryLayout\";\r\nimport {FormWrapper, InnerFormSpacer, Title} from \"../../common/form_components\";\r\nimport OrderFormInputs from \"./Inputs/Inputs\";\r\nimport OrderFormSummarize from \"./Summarize/Summarize\";\r\nimport OrderFormControls from \"./Controls/Controls\";\r\nimport {Spacer} from \"../../common/layout\";\r\n\r\n\r\nconst getDefaultState = (composition) => {\r\n    console.log(composition)\r\n    let typeVariant = {\r\n        long: {\r\n            value: composition.typeVariant === 1,\r\n            disabled: composition.typeVariant === 2,\r\n        },\r\n        short: {\r\n            value: composition.typeVariant === 2,\r\n            disabled: composition.typeVariant === 1,\r\n        },\r\n    }\r\n    let inputs = {}\r\n\r\n    if (Object.entries(composition.inputs).length > 0) {\r\n        inputs = {\r\n            ...composition.inputs\r\n        }\r\n\r\n        Object.keys(inputs).forEach((propName) => {\r\n            inputs[propName] = {\r\n                ...composition.inputs[propName],\r\n                value: '',\r\n            }\r\n        })\r\n    }\r\n\r\n    return ({\r\n        typeVariant,\r\n        inputs,\r\n    })\r\n}\r\n\r\n\r\nclass OrderFormContainer extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = getDefaultState(props.compMeta)\r\n    }\r\n\r\n    handleTypeVariant = name => event => {\r\n        this.setState({\r\n            ...this.state,\r\n            typeVariant: {\r\n                ...this.state.typeVariant,\r\n                [name]: {\r\n                    ...this.state.typeVariant[name],\r\n                    value: event.target.checked,\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    handleInputs = event => {\r\n        const inpName = event.target.id\r\n        const inpValue = event.target.value\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            inputs: {\r\n                ...this.state.inputs,\r\n                [inpName]: {\r\n                    ...this.state.inputs[inpName],\r\n                    value: inpValue\r\n                }\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    onClear = () => {\r\n        this.setState(getDefaultState(this.props.compMeta))\r\n        // clear session / localStorage (action)\r\n    }\r\n\r\n    onBack = () => {\r\n        this.props.history.goBack()\r\n    }\r\n\r\n    onSubmit = e => {\r\n        e.preventDefault();\r\n        // валидация данных в стейте, затем отправка на сервер\r\n        this.props.history.push(`${this.props.location.pathname}/success`)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <SecondaryLayout>\r\n                <Spacer/>\r\n\r\n                <FormWrapper maxWidth=\"xl\">\r\n                    <InnerFormSpacer>\r\n                        <Title text=\"Форма заказа\"/>\r\n\r\n                        <form noValidate onSubmit={this.onSubmit}>\r\n                            <OrderFormInputs inputs={this.state} handlers={{\r\n                                handleTypeVariant: this.props.compMeta.typeVariant === 0 ? this.handleTypeVariant : () => {\r\n                                },\r\n                                handleInputs: this.handleInputs\r\n                            }}/>\r\n                            <OrderFormSummarize price={this.props.compMeta.price} title={this.props.compMeta.title}/>\r\n                            <OrderFormControls onClear={this.onClear} onBack={this.onBack}/>\r\n                        </form>\r\n\r\n                    </InnerFormSpacer>\r\n                </FormWrapper>\r\n\r\n            </SecondaryLayout>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    user: state.auth,\r\n    compData: state.compOrderForm\r\n})\r\n\r\nexport default connect(mapStateToProps, {})(OrderFormContainer)"]},"metadata":{},"sourceType":"module"}