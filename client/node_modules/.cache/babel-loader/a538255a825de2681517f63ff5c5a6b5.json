{"ast":null,"code":"import _objectWithoutProperties from \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\src\\\\views\\\\layout\\\\header\\\\LoginButton.js\";\nimport React, { useEffect, useRef } from 'react';\nimport Button from \"@material-ui/core/Button\";\n\nfunction LoginButton(_ref) {\n  let login = _ref.login,\n      props = _objectWithoutProperties(_ref, [\"login\"]);\n\n  const onHandleLogin = () => {\n    const popupWindow = window.open(process.env.REACT_APP_API_URL + '/auth/steam', '_blank', 'width=800, height=600');\n    if (window.focus) popupWindow.focus();\n  };\n\n  const loginSubmit = event => {\n    if (event.origin !== process.env.REACT_APP_API_URL) return;\n    const res = event.data.response; // props.login(res.data)\n\n    login(res.data);\n  };\n\n  useEffect(() => {\n    window.addEventListener('message', event => {\n      if (event.origin !== process.env.REACT_APP_API_URL) return;\n      const _event$data = event.data,\n            token = _event$data.token,\n            ok = _event$data.ok;\n\n      if (ok) {\n        localStorage.setItem('authToken', token);\n        console.log(token);\n      }\n    });\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(Button, {\n    onClick: () => onHandleLogin(),\n    color: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"));\n}\n\nexport default LoginButton;","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/views/layout/header/LoginButton.js"],"names":["React","useEffect","useRef","Button","LoginButton","login","props","onHandleLogin","popupWindow","window","open","process","env","REACT_APP_API_URL","focus","loginSubmit","event","origin","res","data","response","addEventListener","token","ok","localStorage","setItem","console","log"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,MAA1B,QAAuC,OAAvC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;;AAGA,SAASC,WAAT,OAAwC;AAAA,MAAlBC,KAAkB,QAAlBA,KAAkB;AAAA,MAARC,KAAQ;;AACpC,QAAMC,aAAa,GAAG,MAAM;AACxB,UAAMC,WAAW,GAAGC,MAAM,CAACC,IAAP,CAAYC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgC,aAA5C,EAA2D,QAA3D,EAAqE,uBAArE,CAApB;AACA,QAAIJ,MAAM,CAACK,KAAX,EAAkBN,WAAW,CAACM,KAAZ;AACrB,GAHD;;AAKA,QAAMC,WAAW,GAAIC,KAAD,IAAW;AAC3B,QAAIA,KAAK,CAACC,MAAN,KAAiBN,OAAO,CAACC,GAAR,CAAYC,iBAAjC,EAAoD;AADzB,UAEVK,GAFU,GAEHF,KAAK,CAACG,IAFH,CAEpBC,QAFoB,EAI3B;;AACAf,IAAAA,KAAK,CAACa,GAAG,CAACC,IAAL,CAAL;AACH,GAND;;AAQAlB,EAAAA,SAAS,CAAC,MAAM;AACRQ,IAAAA,MAAM,CAACY,gBAAP,CAAwB,SAAxB,EAAmCL,KAAK,IAAI;AACxC,UAAIA,KAAK,CAACC,MAAN,KAAiBN,OAAO,CAACC,GAAR,CAAYC,iBAAjC,EAAoD;AADZ,0BAGlBG,KAAK,CAACG,IAHY;AAAA,YAGhCG,KAHgC,eAGhCA,KAHgC;AAAA,YAGzBC,EAHyB,eAGzBA,EAHyB;;AAKxC,UAAIA,EAAJ,EAAQ;AACJC,QAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCH,KAAlC;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAYL,KAAZ;AACH;AACJ,KATD;AAUP,GAXQ,EAWN,EAXM,CAAT;AAaA,SACI,0CACI,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE,MAAMf,aAAa,EAApC;AAAwC,IAAA,KAAK,EAAC,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADJ,CADJ;AAKH;;AAED,eAAeH,WAAf","sourcesContent":["import React, {useEffect, useRef} from 'react';\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\n\r\nfunction LoginButton({login, ...props}) {\r\n    const onHandleLogin = () => {\r\n        const popupWindow = window.open(process.env.REACT_APP_API_URL + '/auth/steam', '_blank', 'width=800, height=600');\r\n        if (window.focus) popupWindow.focus();\r\n    }\r\n\r\n    const loginSubmit = (event) => {\r\n        if (event.origin !== process.env.REACT_APP_API_URL) return;\r\n        const {response: res} = event.data;\r\n\r\n        // props.login(res.data)\r\n        login(res.data)\r\n    }\r\n\r\n    useEffect(() => {\r\n            window.addEventListener('message', event => {\r\n                if (event.origin !== process.env.REACT_APP_API_URL) return;\r\n\r\n                const { token, ok } = event.data;\r\n\r\n                if (ok) {\r\n                    localStorage.setItem('authToken', token);\r\n                    console.log(token);\r\n                }\r\n            });\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <Button onClick={() => onHandleLogin()} color=\"inherit\">Войти</Button>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default LoginButton"]},"metadata":{},"sourceType":"module"}