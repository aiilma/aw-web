{"ast":null,"code":"import _objectWithoutProperties from \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\src\\\\views\\\\layout\\\\header\\\\LoginButton.js\";\nimport React, { useEffect, useRef } from 'react';\nimport Button from \"@material-ui/core/Button\";\n\nfunction LoginButton(_ref) {\n  let login = _ref.login,\n      props = _objectWithoutProperties(_ref, [\"login\"]);\n\n  function handler(event) {\n    if (event.origin === process.env.REACT_APP_API_URL) {\n      console.log(event.data);\n      return;\n    } else {\n      return;\n    }\n  }\n\n  const onHandleLogin = () => {\n    const popupWindow = window.open(process.env.REACT_APP_API_URL + '/api/auth/steam/handle', '_target', 'width=800, height=600');\n    if (window.focus) popupWindow.focus(); // subscribe event\n\n    window.addEventListener(\"message\", handler, {\n      once: true,\n      capture: false,\n      passive: false\n    });\n  }; // const {token, ok} = event.data;\n  //\n  // if (ok) {\n  //     localStorage.setItem('authToken', token);\n  //     console.log(token);\n  // }\n\n\n  return React.createElement(Button, {\n    onClick: () => onHandleLogin(),\n    color: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\");\n}\n\nexport default LoginButton;","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/views/layout/header/LoginButton.js"],"names":["React","useEffect","useRef","Button","LoginButton","login","props","handler","event","origin","process","env","REACT_APP_API_URL","console","log","data","onHandleLogin","popupWindow","window","open","focus","addEventListener","once","capture","passive"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,MAA1B,QAAuC,OAAvC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;;AAGA,SAASC,WAAT,OAAwC;AAAA,MAAlBC,KAAkB,QAAlBA,KAAkB;AAAA,MAARC,KAAQ;;AACpC,WAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACpB,QAAIA,KAAK,CAACC,MAAN,KAAiBC,OAAO,CAACC,GAAR,CAAYC,iBAAjC,EAAoD;AAChDC,MAAAA,OAAO,CAACC,GAAR,CAAYN,KAAK,CAACO,IAAlB;AACA;AACH,KAHD,MAGO;AACH;AACH;AACJ;;AAED,QAAMC,aAAa,GAAG,MAAM;AACxB,UAAMC,WAAW,GAAGC,MAAM,CAACC,IAAP,CAAYT,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgC,wBAA5C,EAAsE,SAAtE,EAAiF,uBAAjF,CAApB;AACA,QAAIM,MAAM,CAACE,KAAX,EAAkBH,WAAW,CAACG,KAAZ,GAFM,CAGxB;;AACAF,IAAAA,MAAM,CAACG,gBAAP,CAAwB,SAAxB,EAAmCd,OAAnC,EAA4C;AACxCe,MAAAA,IAAI,EAAE,IADkC;AAExCC,MAAAA,OAAO,EAAE,KAF+B;AAGxCC,MAAAA,OAAO,EAAE;AAH+B,KAA5C;AAKH,GATD,CAVoC,CAqBpC;AACA;AACA;AACA;AACA;AACA;;;AAEA,SACI,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE,MAAMR,aAAa,EAApC;AAAwC,IAAA,KAAK,EAAC,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADJ;AAGH;;AAED,eAAeZ,WAAf","sourcesContent":["import React, {useEffect, useRef} from 'react';\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\n\r\nfunction LoginButton({login, ...props}) {\r\n    function handler(event) {\r\n        if (event.origin === process.env.REACT_APP_API_URL) {\r\n            console.log(event.data)\r\n            return\r\n        } else {\r\n            return\r\n        }\r\n    }\r\n\r\n    const onHandleLogin = () => {\r\n        const popupWindow = window.open(process.env.REACT_APP_API_URL + '/api/auth/steam/handle', '_target', 'width=800, height=600');\r\n        if (window.focus) popupWindow.focus();\r\n        // subscribe event\r\n        window.addEventListener(\"message\", handler, {\r\n            once: true,\r\n            capture: false,\r\n            passive: false,\r\n        });\r\n    }\r\n\r\n    // const {token, ok} = event.data;\r\n    //\r\n    // if (ok) {\r\n    //     localStorage.setItem('authToken', token);\r\n    //     console.log(token);\r\n    // }\r\n\r\n    return (\r\n        <Button onClick={() => onHandleLogin()} color=\"inherit\">Войти</Button>\r\n    );\r\n}\r\n\r\nexport default LoginButton"]},"metadata":{},"sourceType":"module"}