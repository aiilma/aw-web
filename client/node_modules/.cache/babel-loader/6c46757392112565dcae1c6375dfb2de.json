{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\php\\\\Laravel\\\\aw.client\\\\src\\\\views\\\\layout\\\\header\\\\LoginButton.js\";\nimport React from 'react';\nimport Button from \"@material-ui/core/Button\";\n\nclass LoginButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.loginSubmit = event => {\n      if (event.origin !== process.env.REACT_APP_API_URL) return;\n      const res = event.data.response;\n      this.props.login(res.data);\n    };\n  }\n\n  onHandleLogin() {\n    const popupWindow = window.open(process.env.REACT_APP_API_URL + '/api/auth/steam/handle', '', 'width=800, height=600');\n    if (window.focus) popupWindow.focus();\n  }\n\n  componentDidMount() {\n    window.addEventListener('message', this.loginSubmit.bind(this));\n  }\n\n  componentWillUnmount() {\n    // Make sure to remove the DOM listener when the component is unmounted.\n    window.removeEventListener('message', this.loginSubmit.bind(this));\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(Button, {\n      onClick: this.onHandleLogin,\n      color: \"inherit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30\n      },\n      __self: this\n    }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"));\n  }\n\n}\n\nexport default LoginButton;","map":{"version":3,"sources":["D:/Projects/php/Laravel/aw.client/src/views/layout/header/LoginButton.js"],"names":["React","Button","LoginButton","Component","loginSubmit","event","origin","process","env","REACT_APP_API_URL","res","data","response","props","login","onHandleLogin","popupWindow","window","open","focus","componentDidMount","addEventListener","bind","componentWillUnmount","removeEventListener","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;;AAEA,MAAMC,WAAN,SAA0BF,KAAK,CAACG,SAAhC,CAA0C;AAAA;AAAA;;AAAA,SAOtCC,WAPsC,GAOvBC,KAAD,IAAW;AACrB,UAAIA,KAAK,CAACC,MAAN,KAAiBC,OAAO,CAACC,GAAR,CAAYC,iBAAjC,EAAoD;AAD/B,YAEJC,GAFI,GAEGL,KAAK,CAACM,IAFT,CAEdC,QAFc;AAIrB,WAAKC,KAAL,CAAWC,KAAX,CAAiBJ,GAAG,CAACC,IAArB;AACH,KAZqC;AAAA;;AACtCI,EAAAA,aAAa,GAAG;AACZ,UAAMC,WAAW,GAAGC,MAAM,CAACC,IAAP,CAAYX,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgC,wBAA5C,EAAsE,EAAtE,EAA0E,uBAA1E,CAApB;AACA,QAAIQ,MAAM,CAACE,KAAX,EACIH,WAAW,CAACG,KAAZ;AACP;;AASDC,EAAAA,iBAAiB,GAAG;AAChBH,IAAAA,MAAM,CAACI,gBAAP,CAAwB,SAAxB,EAAmC,KAAKjB,WAAL,CAAiBkB,IAAjB,CAAsB,IAAtB,CAAnC;AACH;;AAEDC,EAAAA,oBAAoB,GAAG;AACnB;AACAN,IAAAA,MAAM,CAACO,mBAAP,CAA2B,SAA3B,EAAsC,KAAKpB,WAAL,CAAiBkB,IAAjB,CAAsB,IAAtB,CAAtC;AACH;;AAEDG,EAAAA,MAAM,GAAG;AACL,WACI,0CACI,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKV,aAAtB;AAAqC,MAAA,KAAK,EAAC,SAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADJ,CADJ;AAKH;;AA7BqC;;AAgC1C,eAAeb,WAAf","sourcesContent":["import React from 'react';\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nclass LoginButton extends React.Component {\r\n    onHandleLogin() {\r\n        const popupWindow = window.open(process.env.REACT_APP_API_URL + '/api/auth/steam/handle', '', 'width=800, height=600');\r\n        if (window.focus)\r\n            popupWindow.focus()\r\n    }\r\n\r\n    loginSubmit = (event) => {\r\n        if (event.origin !== process.env.REACT_APP_API_URL) return;\r\n        const {response: res} = event.data;\r\n        \r\n        this.props.login(res.data)\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('message', this.loginSubmit.bind(this));\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // Make sure to remove the DOM listener when the component is unmounted.\r\n        window.removeEventListener('message', this.loginSubmit.bind(this));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Button onClick={this.onHandleLogin} color=\"inherit\">Войти</Button>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LoginButton"]},"metadata":{},"sourceType":"module"}